.TH VIM-PLUGIN.ECLASS 5 "Dec 2004" "Portage 2.0.51" portage
.SH NAME
vim-plugin.eclass \- functions to ease installation of Vim plugins
.SH DESCRIPTION
The \fBvim-plugin\fR eclass provides functions meant to simplify the
installation of Vim plugins into a version-independent directory,
/usr/share/vim/vimfiles.
.SH VARIABLES
.TP
.B VIM_PLUGIN_HELPFILES
Defines a white-space delimited list of help files, used soley for informing
the user how to access them within Vim.
.TP
.B VIM_PLUGIN_HELPTEXT
Defines help text to display.  Used only if \fBVIM_PLUGIN_HELPFILES\fR is unset.
.TP
.B VIM_PLUGIN_HELPURI
Defines a URI where on-line plugin documentation is available.  This variable
is only used if \fBVIM_PLUGIN_HELPFILES\fR and \fBVIM_PLUGIN_HELPTEXT\fR are
unset.
.TP
.B VIM_PLUGIN_MESSAGES
Defines a white-space delimited list of settings that the Vim plugin makes use
of.  Currently, only 'filetype' is supported; any other specified settings will
be ignored.
.SH FUNCTIONS
.TP
.B update_vim_afterscripts
Creates scripts in /usr/share/vim/vimfiles/after that are comprised of the
snippets located in /usr/share/vim/vimfiles/after/*/*.vim.d. In addition,
any stale scripts that were previously generated by this function are removed.
.TP
.B display_vim_plugin_help
Displays a message containing plugin help information. This function checks
the variables \fBVIM_PLUGIN_HELPFILES\fR, \fBVIM_PLUGIN_HELPTEXT\fR, and
\fBVIM_PLUGIN_HELPURI\fR (in that order) and displays the first one that is
defined.  In addition, any setting-specific messages that correspond to
settings listed in \fBVIM_PLUGIN_MESSAGES\fR will be displayed.
.TP
.B vim-plugin_src_install
Default src_install.  Installs plugin documentation prior to installing the
entire contents of \fB${S}\fR to /usr/share/vim/vimfiles.
.TP
.B vim-plugin_pkg_postinst
Default pkg_postinst that updates Vim helptags (see \fBupdate_vim_helptags\fR
in vim-doc.eclass), updates after scripts, and calls \fBdisplay_vim_plugin_help\fR.
.TP
.B vim-plugin_pkg_postrm
Default pkg_postrm that updates Vim helptags (see \fBupdate_vim_helptags\fR
in vim-doc.eclass), updates after scripts, and removes any empty directories
in /usr/share/vim/vimfiles.
.SH PACKAGING
In general, tarballs for plugins cannot be used directly because of vim.org's
idiosyncratic download system. Instead, a Gentoo-specific tarball must be made
with the following format for contents:

.nf
    packagename-version/
    packagename-version/doc/
    packagename-version/doc/whatever.txt
    packagename-version/plugin/
    packagename-version/plugin/whatever.vim
    packagename-version/syntax/
    packagename-version/syntax/whatever.vim
.fi
.SH PACKAGE NAMING CONVENTIONS
Where possible, the upstream script name should be used as the package name.
For packages which provide syntax or filetype files, the name should be suffixed
with "-syntax" (for example, "app-vim/gentoo-syntax", "app-vim/fluxbox-syntax", 
"app-vim/selinux-syntax").
.SH PACKAGE VARIABLE CONVENTIONS
The canonical form for the HOMEPAGE variable for vim.org scripts is 
http://www.vim.org/scripts/script.php?script_id=123.
.SH REPORTING BUGS
Please report bugs via http://bugs.gentoo.org/
.SH SEE ALSO
.BR ebuild (5)
.SH FILES
.nf
.B /usr/portage/eclass/vim-plugin.eclass  
.B /usr/portage/eclass/vim-doc.eclass
.fi
.SH AUTHORS
Aaron Walker <ka0ttic@gentoo.org>
