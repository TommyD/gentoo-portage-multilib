# ChangeLog for Portage; the Gentoo Linux ports system 
# Copyright 2002 Gentoo Technologies, Inc.; Distributed under the GPL v2

*portage-1.8.16 (04 Apr 2002)

  04 Apr 2002; Geert Bevin <gbevin@gentoo.org> portage.py, emerge : Forgot to
  commit my changes, this is an assembled version of both drobbins's and my
  changes

*portage-1.8.15 (04 Apr 2002)

  04 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Fixed a
  semi-long standing bug where I was comparing atimes rather than mtimes when
  seeing if dep caches were stale.  This fixes a bug originally reported by Dan
  Armak.
  
*portage-1.8.14 (04 Apr 2002)

  04 Apr 2002; Geert Bevin <gbevin@gentoo.org> emerge:
  Fixed short options for --all, --safe and clean.
  
*portage-1.8.13 (04 Apr 2002)

  04 Apr 2002; Geert Bevin <gbevin@gentoo.org> portage.py, emerge:
  Added emerge --all clean and emerge --safe unmerge.
  Made the counter updates atomic so that multiple merges can happen without
  risking counter clashes.
  Updated --help.
  Fixed short options bug that prevented two seperate short options to be
  specified successively.

*portage-1.8.12 (04 Apr 2002)

  04 Apr 2002; Geert Bevin <gbevin@gentoo.org> portage.py, emerge:
  implemented "emerge clean" with oldrevs, oldversions and oldslots options for
  the make.conf/make.globals CLEANMODE variable.
  
  03 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Added an
  indentation fix to prevent merge from dying if a file attempts to install
  itself on top of an existing directory.  Closes bug #1498.

*portage-1.8.11.1 (03 Apr 2002)

  03 Apr 2002; Geert Bevin <gbevin@gentoo.org> portage.py: important fixes
  for movefile() -- changed the order of ownership / permissions settings since
  suid/guid bits were overwritten, added support back for 'ebuild config' since
  it was accidentally left out

*portage-1.8.11 (02 Apr 2002)

  02 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: important fixes
  for movefile() -- ownership now preserved across filesystems, mv -f fallback
  for special files, other optimizations and robustness improvements.  Important
  fixes all-round.

  02 Apr 2002; Geert Bevin <gbevin@gentoo.org> emerge: 
  fixed bad indentation of a part of the code that made unmerging multiple
  packages behave badly

*portage-1.8.10 (01 Apr 2002)

  01 Apr 2002; Daniel Robbins <drobbins@gentoo.org> make.globals: removed USE
  settings from make.globals.

  01 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: In trying to fix
  the glibc merge bug, we rewrote movefile() and it now runs blazingly fast.  I
  also tweaked the code to remove the need for an ">>> Updating mtimes..."
  stage.  This is all done dynamically now.  *Much* faster.  And hopefully
  solid for glibc upgraders.

*portage-1.8.9.4 (01 Apr 2002)

  31 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: adapted
  movefile() which should preserves timestamps and ownership on files and
  symlinks it moves.

*portage-1.8.9.3 (31 Mar 2002)

  31 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: promising
  rewrite of movefile() not only will probably fix glibc merge bug but also
  speeds up merging at least 20x!  Calling "mv" for every file really make
  things super-slow!

*portage-1.8.9.2 (31 Mar 2002)

  31 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: desperate attempt
  to fix movefile() bug... a hack really.  glibc merges still dying.

*portage-1.8.9.1 (31 Mar 2002)

  31 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: it appears that
  movefile() (using "/bin/mv") can still die if moving a new symlink on top of
  an existing library symlink.  Upon failure, we now use a fallback mechanism
  to use "/bin/sln" to create the new symlink safely.

*portage-1.8.9 (30 Mar 2002)

  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: tiny cosmetic
  fix for digest generation.
  
  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> emerge: entries in the
  world profile will be ignored if at least one version of the package in
  question isn't already merged.  Prevents "--update world" from remerging
  packages that have since been unmerged.
  
  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> various: changing all
  references from /usr/bin/python to /usr/bin/python2.2.
  
  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> db-update.py: moving this
  script here from FILESDIR.
  
  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: stuff doesn't
  get added to the world profile if it is already an essential ("*") package in
  the system profile.  Keeps things clean and flexible.

*portage-1.8.9_pre38 (30 Mar 2002)

  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: resolve_key()
  didn't call load() on mapped virtuals, resulting in inconsistent resolution
  of virtual keys.  Now fixed; thanks to woodchip for the bug report.

*portage-1.8.9_pre37 (30 Mar 2002)

  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: specific
  provides (dev-lang/python-2.2) will be converted to their generic form
  (dev-lang/python) before being recorded.

*portage-1.8.9_pre36 (30 Mar 2002)

  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: new
  virtuals fixes and a db-upgrade.py script in the ebuild to solve another
  virtuals problem.

*portage-1.8.9_pre35 (29 Mar 2002)

  29 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: digest
  generation fixes; emerge --update will now update dependents even if the main
  package hasn't been updated.  getdict() fix, fixing a traceback.

*portage-1.8.9_pre34 (28 Mar 2002)

  28 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Added an indent
  fix for the new virtuals code, eliminating a traceback.  Tweaked digest handling,
  fixing a cosmetic error.

*portage-1.8.9_pre33 (28 Mar 2002)

  28 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: tweaked digest
  creation in doebuild() to hopefully avoid creating digests twice.  I hope I
  didn't break anything in the process.

  28 Mar 2002: Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: "emerge
  update" is now "emerge --update"; "world" added back.  New world
  implementation that works like this ... if you type "emerge media-gfx/gimp",
  media-gfx/gimp will be added to the "world" favorites file in
  /var/cache/edb/world.  This world file is added to the system profile in
  order to create the set of "world" packages to merge.  You can manually put
  specific deps (for pinning) in /var/cache/edb/world and they won't get
  overwritten.  To prevent a package that you specify on the emerge
  command-line from being added to the world profile, use the "--oneshot"
  option, which tells emerge that it should be merged once but not updated.
  
  28 Mar 2002: Daniel Robbins <drobbins@gentoo.org> portage.py: New virtuals
  implementation; new virtual info is recorded in /var/cache/edb/virtuals;
  virtuals data is created by merging the profile virtual info with the new
  edb/virtuals file.  Note: We no longer add virtual package entries to
  /var/db/pkg.  This change solves the bug where virtual files get auto-updated
  by pkg-update, and also solves the bug where doing an "emerge --update world"
  will cause ssmtp to be merged in order to satisfy the virtual/mta dep (which
  you already have satisfied by postfix, for example).  Now, postfix will be
  updated if necessary, but that's it. :)

*portage-1.8.9_pre32 (22 Mar 2002)

  22 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fixed a bug
  related to scanning for available binary packages, which would cause emerge
  to die.
  
  21 Mar 2002; Dan Armak <danarmak@gentoo.org> portage.py: added ECLASSDIR
  (=$PORTDIR/eclass) to settings exported by python side to bash side.
  ebuild.sh: remove ECLASSDIR setting to use the one now provided by
  portage.py.  Also, clean inherit() and make it use debug-print().

*portage-1.8.9_pre31 (21 Mar 2002)

  21 Mar 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh: Added Dan
  Armak's patch to enable eclasses. :)
  
  21 Mar 2002; Grant Goodyear <g2boojum@gentoo.org> portage.py: 
  Added a drobbins patch to at line 469.  Should fix emerge rsync
  problem when /etc/make.profile doesn't exist.

*portage-1.8.9_pre30 (20 Mar 2002)

  20 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: emerge
  --emptytree now works again and I added a new --nodeps option to emerge as
  well.

*portage-1.8.9_pre29 (20 Mar 2002)

  20 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: CONTENTS files
  now record the correct path when ROOT!="/".

*portage-1.8.9_pre28 (20 Mar 2002)

  20 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: an
  /etc/make.profile dir is now optional and portage will work if it's missing
  or is a broken symlink.
  
  20 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fix load()
  method in packagetree() class.

*portage-1.8.9_pre27 (19 Mar 2002)

  19 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py:
  /etc/make.profile/packages wasn't correctly masking core system packages;
  fixed.

*portage-1.8.9_pre26 (18 Mar 2002)

  18 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: configuration
  settings don't get loaded from ${ROOT}/etc anymore, just /etc.  This
  simplifies the creation of a new build image.
  
  18 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Don't expect a
  digest file if SRC_URI is set to "" or undefined.

  18 Mar 2002; Daniel Robbins <drobbins@gentoo.org>: RDEPEND was getting set
  to DEPEND even if there was an RDEPEND="" in the ebuild.  This has now been
  fixed and RDEPEND will only get to DEPEND if RDEPEND has unset (not "unset
  or null", as it was before this fix.)
  
  18 Mar 2002; Daniel Robbins <drobbins@gentoo.org>: emerge: circular
  dependencies error will result in the digraph dependencies being printed to
  stdout, greatly simplifying debugging.
  
  18 Mar 2002; Geert Bevin <gbevin@gentoo.org>: src/sandbox/problems: Added
  several sample implementations to reproduce reported bugs.

  18 Mar 2002; Geert Bevin <gbevin@gentoo.org>: libsandbox.c: All paths are now
  checked for multiple successive slashes anywhere, this closes bug 827.
  Performance should be slightly improved for other apps on the system for who
  the sandbox is not turned on.
  
  14 Mar 2002; Daniel Robbins <drobbins@gentoo.org>: output.py: quick fix to
  turn off white color output -- not good for terminals with white background.
  This closes bug #1135.
  
  11 Mar 2002; Daniel Robbins <drobbins@gentoo.org>: Applied karltk's version
  information patch.  Portage.py now contains version information, and this
  info is reported by "emerge --version".  Thanks Karl! :)
 
*portage-1.8.9_pre25 (11 Mar 2002)
 
  10 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: roll
  back portagetree incremental db optimizations to fix an important bug (no
  package.mask calculations being done.)  Emerge will now abort if a dependency
  can't be satisfied rather than printing just a warning.

*portage-1.8.9_pre24 (09 Mar 2002)

  09 Mar 2002; Daniel Robbins <drobbins@gentoo.org> emerge: fixed missing
  "--clean" option so "--clean rsync" should work again.  Also converted emerge
  to work with our new db layout (db objects are in the portage module now).

  09 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Added USE
  ordering, a concept envisioned by Vitaly Kushneriuk.  The idea is to allow
  customization of how Portage resolves USE variables.  The default is
  "env:conf:auto:defaults" (set in the USE_ORDER variable -- this default is
  now in make.globals but as always you should set your custom USE_ORDER in
  make.conf if desired.)  So, my default, USE settings will be calculated as
  follows.  The USE variables will be grabbed from the
  /etc/make.profile/make.defaults file (this is "defaults".) Then, the
  /etc/make.profile/use.defaults file will be consulted.  This file lists (one
  per line) a USE variable and a corresponding dependency.  If the dependency
  is satisfied, the USE variable is auto-enabled and added to our working list
  (this is "auto").  Then /etc/make.conf is consulted, so that the user has the
  option of force-enabling (with USE="foo") or force-disabling (with
  USE="-foo") any USE variables as desired (this is "conf".)  Then, the
  environment is consulted, allowing easy modifications from the command-line
  (this is "env").  Also added is the ability for USE settings to be
  dynamically regenerated in an efficient way as packages are merged.  So,
  right after xfree is emerged, the "X" use variable can be immediately
  auto-enabled.  Thanks to Vitaly for providing the vision for this.

*portage-1.8.9_pre23 (08 Mar 2002)

  09 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: our portage
  tree and /var/db/pkg tree now uses incremental caching rather than doing
  an exhaustive scan on startup.  This should speed up this respective code
  by 2-30x depending on how many packages you're emerging.  This involved
  quite a few changes to the code, and there could be some bugs, although I
  tried to be very careful.  These changes could also break code that access
  internal .tree[] dictionaries directly. 
  
  08 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: SRC_URIs with
  USE-enabled ( ) clauses in them weren't working because I was iterating
  through multi-level lists without flatten()ing them.  Now fixed.
  
  07 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: We no longer
  depend upon a file being unmerged.  We try to unlink during unmerge() in a
  "try" clause, with an exception for OSError.  If the directory is immutable
  then Portage continues gracefully.  This closes a bug reported by Verwilst --
  unmerging an old baselayout would die when it tried to delete /dev/shm.
  Fixed in Portage to eliminate these kinds of problems in the future.

*portage-1.8.9_pre22 (07 Mar 2002)

  07 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: I had
  sys.exit() in doebuild()'s fetch section.  Converted to "return 1" and
  "return 0" to be emerge --fetchonly friendly.  Thanks to Dan Armak for the
  bug report.

*portage-1.8.9_pre21 (07 Mar 2002)

  07 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fixed symlink
  merge bug related to "safe" emerges.  This should fix problems of Portage
  dying when merging certain things.  I'm hoping that this fix will give us a
  solid merge implementation.  It should.  Thanks to Bart Verwilst for tracking
  down a merge problem that I could reproduce.

*portage-1.8.9_pre20 (06 Mar 2002)

  06 Mar 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh, others: users
  can now forcefully disable stripping of their ebuild binaries by adding a
  RESTRICT="nostrip" to their ebuild.  Additionally, the DEBUG variable has
  been renamed to DEBUGBUILD to prevent namespace collisions.  This closes bug
  #868.
  
  06 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Fixed a
  long-standing bug where the pkg_preinst() and pkg_postinst() functions being
  called came from the existing package ebuild in /var/db/pkg rather than the
  new ebuild being merged.  pkg_prerm() and pkg_postrm() still use the ebuild
  in /var/db/pkg, which is correct.  Thanks to Dan Armak for tracking down this
  bug.

*portage-1.8.9_pre19 (05 Mar 2002)
  
  05 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Fixed two bugs
  reported by Dan Armak relating to incomplete (not missing) message digests.
  They should now get regenerated automatically is "digest" is in FEATURES and
  not confuse the fetch code.

*portage-1.8.9_pre18 (04 Mar 2002)

  04 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Bug fix in
  dep_bestmatch(); rev comparison now works correctly and dep_bestmatch will
  properly handle 2-digit revisions in particular.  This closes bug #952.
  
  04 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Thanks to a
  bug report by Bruce Locke, the long-standing bug where symlinks with
  different mtimes would still get unmerged is now fixed.  This allows glibc
  (of all things) to be unmerged safely.  We needed this fix.  Closes bug #964.
  
  03 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : KDEDIR ->
  KDEDIRS (fixing my typo)

*portage-1.8.9_pre17 (27 Feb 2002)

  27 Feb 2002; Daniel Robbins <drobbins@gentoo.org> emerge : --help
  documentation is now up-to-date; short options tweaked.
  
  26 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Fixed an
  unmerge error caused by digests now being recorded in lowercase.  unmerge now
  compensates for 100% backwards compatibility.  Moved "continue" outside of
  "try" block since this is disallowed in Python.  This fixes a python warning
  during fetch.
  
  26 Feb 2002; Geert Bevin <gbevin@gentoo.org> bin/dohtml : Added support for
  installing .gif files too since quite some docs still ship with those instead
  of .jpg or .png.

*portage-1.8.9_pre16 (25 Feb 2002)

  25 Feb 2002; Daniel Robbins <drobbins@gentoo.org> emerge : emerge syntax
  changed back to "classic" style; replaced dots with spinner, did a major code
  cleanup and removed pieces that will be rewritten for 1.8.9 final.  emerge
  documentation isn't up-to-date at all; I'm holding off on the --help rewrite
  until after 1.8.9 features have been finalized (soon!)
 
  25 Feb 2002; Daniel Robbins <drobbins@gentoo.org> : Added RESTRICT variable
  to ebuilds.  If RESTRICT="fetch" is set in the ebuild, it means that the
  files listed in SRC_URI are simply filenames and that the real files must be
  downloaded manually.  This allows us to deal with realplayer, since
  overriding dyn_fetch is no longer an option now that we have the fetch code
  in python.  Also added a cosmetic tweak to emerge during info file
  regeneration.
  
  25 Feb 2002; Daniel Robbins <drobbins@gentoo.org> cnf/* : updated ${x} ->
  ${URI} in $FETCHCOMMAND.

  24 Feb 2002; Daniel Robbins <drobbins@gentoo.org> Fixed another fetch bug
  where the download wouldn't cycle to alternate mirrors (it'd get stuck on
  the first download location)

*portage-1.8.9_pre15 (24 Feb 2002)

  24 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: some fixing of
  the merge code; added automatic digest generation when "digest" is in
  FEATURES; made the fetch() code not depend on a pre-existing digest.  This
  should fix all known digest/fetch issues.

*portage-1.8.9_pre14 (23 Feb 2002)

  23 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: If you have a
  file that's hosted directly on our master ibiblio mirror, you can specify
  it in SRC_URI as "http://mirror/myfile.tar.bz2".  "http://mirror" will be
  expanded to the first mirror defined in GENTOO_MIRRORS, or our master ibiblio
  mirror if no mirrors are defined.  Groovy.  This closes bug #627.
  
  23 Feb 2002; Daniel Robbins <drobbins@gentoo.org> make.globals, emerge,
  portage.py: wget is no longer hardcoded; FETCHCOMMAND is enabled again, but
  uses ${FILE} and ${URI} instead of ${x} and ${y} now.  Added download
  resuming, which requires the definition of RESUMECOMMAND (added to
  make.globals).  Updated spawn() so that when it's called as spawn(foo,free=1)
  as an argument, sandboxing is turned off.  Replaced all calls to
  os.system(foo) with spawn(foo,free=1), since os.system() messes with signal
  handling.  Added a default SIGINT signal handler to portage.py so that ^C
  interrupts are handled correctly (portage will immediately exit with a return
  code of 1).  This has been tested and works for ebuild and emerge.  These
  additions should also close bug #407 and #760.
 
  23 Feb 2002; Daniel Robbins <drobbins@gentoo.org> emerge: spython -> python
  fix; resolution of cvs merge conflict.  Removed edepend assignment bug
  reintroduced in Geert's commit; added comment explaining why the new code is
  needed so it doesn't get removed again ;)

  22 Feb 2002; Geert Bevin <gbevin@gentoo.org> emerge: removed spurious cvs
  conflict lines fixed bug in the cleanup code where different slots weren't
  handled too well

*portage-1.8.9_pre13 (22 Feb 2002)

  22 Feb 2002; Daniel Robbins <drobbins@gentoo.org> various: fix /bin/sh
  symlink merge problems and massively simplified movefile() code.  Added back
  some emerge code so that "emerge --search rsync" doesn't run rsync.

*portage 1.8.9_pre12 (22 Feb 2002)

  22 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: everything
  should now generate *lowercase* md5sums, fixing problems with digest 
  backwards compatibility.
  
  22 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: changed
  position of digest generation call so that "ebuild digest" now works if the
  sources have not yet been downloaded.
  
*portage 1.8.9_pre11 (22 Feb 2002)

  22 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: unmerging now
  works correctly.

*portage 1.8.9_pre10 (22 Feb 2002)

  22 Feb 2002; Daniel Robbins <drobbins@gentoo.org>: "emerge" didn't like the
  new portage.py (fixed); A merge database bug (fixed).  Fixing the merge bug
  should also result in merges happening much faster than before, maybe up to 3
  times as fast.  We no longer resolve symlinks when testing protection paths.

*portage 1.8.9_pre9 (21 Feb 2002)

  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org>: moved entirety of Portage
  download/digest code from ebuild.sh (bash) to portage.py (python).  No
  support for custom FETCHCOMMANDs yet, but that's coming soon.  Good news is
  that it appears to work well and allowed some cleanups and optimizations to
  doebuild().  SYNC support added.  See cnf/make.conf for more info --
  basically, "emerge rsync" (now callable via "emerge sync" as well) supports a
  configurable "Portage server" that begins either with "rsync://" or "cvs://".
  "emerge sync" is now not only a clean front-end, but a configurable front-end
  to the Portage update process.  I also removed dependency checking from
  'ebuild'.  This allowed me to removed some redundant code from portage.py,
  and seemed fine to do since 'ebuild' is more and more becoming a low-level
  developer tool.
  
  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org>: rewrite of cumulative USE
  setting code so that the new FEATURES (what used to be called MAINTAINER) is
  now cumulative and supports "-" and "-*" options.  FEATURES is expanded using
  all config files, while USE ignores make.globals but uses everything else.
  Optimization of a couple parts of doebuild().  Upgraded expandpath() and used
  it in one place where it was removed accidentally (in the new merge code.)
  Master category list is now stored externally in
  ${PORTDIR}/profiles/categories for ease of maintenance.
  
  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org> emerge: now supports the
  EMERGE_OPTS make.conf variable for enabling emerge options by default.
  Closes bug #605.
  
  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: dep_match() now
  works with * deps (again?  Looks like the code got ripped out somehow); this
  closes bug #490.
  
  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org> global change from
  "spython" -> "python", now that Portage is slick enough to update shared
  libraries correctly.
  
  21 Feb 2002; Grant Goodyear <g2boojum@gentoo.org> bin/chkcontents,
  man/chkcontents.1: New script to compare what's in a package's CONTENTS file
  with what's actually on the filesystem.  Useful for discovering that a
  package "collision" has occurred.

  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh, portage.py:
  Dependencies should be no longer checked during the "unpack" stage.  This
  closes bug #231.  Added the $KV kernel version variable to ebuild.sh so that
  it's available for all ebuilds.  This closes bug #599.
  
  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh: S now defaults
  to ${WORKDIR}/${P} if it isn't defined.  That's right.  Defining S is now
  optional :)  This should eliminate around 1000 lines from our ports tree.
  
  20 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Fixed some
  major bugs in the new merge/config protect code.  Merging and config
  protection should now work.
  
  18 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge,
  ebuild.sh : Rewrote merge code.  Should merge symlinks only *after* the
  target has been merged (needs testing).  Added lots of comments.  Split
  dblink.merge() into 2 new functions -- .walktree() and .mergeme().
  Cleaned/optimized merging a good deal.  Added special "-*" USE variable to
  unset *all* USE variables defined up until that point.  
  
  18 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge,
  ebuild.sh : Fixed USE bug (config.reset() threw away our cumulative USE),
  streamlined turbo dep calculations by moving edb cache entry creation to
  ebuild.sh.  Started coding new dblink.merge() method that should be much
  cleaner, faster and merge symlinks safely.
 
  17 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Added
  cumulative USE variable support.  The final USE var is calculated
  cumulatively starting with make.profile, then make.conf, and then the
  environment.  Any "-foo" option in USE will turn off a previously-defined USE
  setting.  So, if you want to use the profile-default USE settings except turn
  "X" off, you add 'USE="-X"' to /etc/make.conf and that's it.  This greatly
  simplifies USE variable maintenance since developers can now easily add new
  USE variables that default to 'on'.  Simply add the USE variable and then add
  it to make.profile.  It will then be included in everyone's USE variables
  automatically unless they explicitly "-newvar" in /etc/make.conf or in the
  local environment.  This also enables easy one-shot disabling of USE
  variables.  For example, to merge xchat without GNOME support (when "gnome"
  is in your /etc/make.conf USE variable), simply type "USE="-gnome" emerge
  net-irc/xchat".  This is a lot easier than temporarily tweaking
  /etc/make.conf.
 
  17 Feb 2002: Daniel Robbins <drobbins@gentoo.org> emerge : Added a quick hack
  to cache ebuild dependency info using extended attributes on XFS filesystems.
  Gives a factor of 10 speedup for dependency calculations.  Will look into a
  generic caching solution that should offer similar performance increases on
  all filesystems.  Note: the fact that this hack is on CVS means that emerge
  is currently in a hyper-experimental state and shouldn't be used right now.
 
  16 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge : added support for 'emerge
  cat/pkg-version' instead of always having to require 'emerge cat/pkg'
  
  15 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge : reimplemented the display
  of cleaned packages to clearly show all versions that are about to be removed
  and which versions are going to stay  

  13 Feb 2002; D.Robbins <drobbins@gentoo.org> emerge :
  added --emptytree option

  13 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge, portage.py :
  fixed little bug where emerge --clean rsync wasn't correctly handled anymore
  implemented all new functionalities of emerge --clean, this adds --slots,
  --versions and --all options together with world and system modes

  12 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge, portage.py :
  changed emerge --zap to emerge --clean
  removed parts of the already implemented slots functionality to be able to
  fall back to a more flexible implementation. Binary compatible slots will now
  mostly influence emerge during the --clean operation

  12 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added fallback check in case UNMERGE_DELAY hasn't been defined in
  make.globals or make.conf

*portage 1.8.9_pre8 (18 Feb 2002)

  12 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  changed the rebuild code to use depgraph instead, dramatically reducing code
  duplication

  11 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  changed indentation of a code part that wasn't at the right level. It got the
  count of the non slot packages during --zap completely wrong

*portage 1.8.9_pre7 (11 Feb 2002)

  11 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  fixed bug in packagetree.dep_match() where a ~ dependency is returned as a
  string instead of as a list
  
  11 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  - removed support for --all and world in 'emerge --unmerge', by default now
    all matching packages are removed since with the new slots functionality
    old package versions should not exists anymore
  - colored package name red too when a blocking package is found during
    pretend operation
  - changed emerge invocation arguments to be in a new universal interface
    format this has been decided to be :
	'emerge --action --option --option [packageset]'
	some features however don't respect this, but that's since they are not
	package installation related and are easier to use as straight commands
	eg: emerge rsync
  - added UNMERGE_DELAY var to make.globals and support it in emerge to obtain
    the number of seconds to wait
  - support for NOCOLOR="yes" as wel as NOCOLOR="true"
  - major speedups for emerge -search
  - added formatted package descriptions of the matches from emerge --search
    that nicely wrap at 80 chars
  - rewrote retrieval of package descriptions to support descriptions that are
    specified on multiple lines
  - added support for 'noslot' to --zap, --update and --rebuild
  
  11 Feb 2002; G.Bevin <gbevin@gentoo.org> sandbox.c, libsandbox.c :
  added checks to see if the files where information is written to are really
  regular files and not symlinks

*portage 1.8.9_pre6 (10 Feb 2002)

  10 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added support for 'emerge --unmerge world' which removes all old package
  versions from the system
  made 'emerge --unmerge' take binary compatibility slots into account, this
  prevents that packages with different versions but also different slots, are
  being unmerged
  added support for "--verbose" in "emerge rebuild" and "emerge world" to
  provide details about packages that aren't in the local tree anymore and to
  notify the user about which packages don't support slots

  9 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added support for the rebuild mode which rebuilds all the packages on your
  system for which a corresponding package could be found in to portage tree

  9 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  renamed getEbuildPaths() or vartree to getebuildpaths()
  fixed bug in the merging of binary packages

  7 Feb 2002; G.Bevin <gbevin@gentoo.org> xpack.py :
  added additional argument to tbz2.getfile() which allows default content to
  be provided when the requested file couldn't be found in the tbz2 archive

  7 Feb 2002; G.Bevin <gbevin@gentoo.org> ebuild.sh :
  added SLOT information as the third entry in the temporary deps file that is
  generated during ebuild depend,
  
  7 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  obtain SLOT information from the deps file instead of using the slotgrab()
  function, removed slotgrab() function, updated some comments

  7 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added SLOT information to the generated edepend var for binary packages

*portage 1.8.9_pre5 (6 Feb 2002)

  6 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  fixed bugs where the old instance wasn't unmerged correctly if slots are
  identical, but ebuild version numbers not

  6 Feb 2002; Grant Goodyear <g2boojum@gentoo.org> cnf/make.conf :
  Copied proxy lines from make.globals (bug 431).

  6 Feb 2002; Vitaly Kushneriuk <vitaly@gentoo.org> portage.py :
  added missing SLOT param to merge(...).
  
*portage 1.8.9_pre4 (6 Feb 2002)

  6 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  fixed some bugs in the handling of PROVIDES and virtual packages together
  with slots, they used code that wasn't upudated to the new dblink constructor
  virtuals now use "" as slot, resulting in normally to same behaviour as what
  has been done before.
  
  5 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  sorted the packages to unmerge since this makes package names with revision
  endings appear before plain version numbers. This makes the unmerge code
  first remove the old and non slot aware packages before removing the newer
  alternative which is in fact exactly the same apart from the revision
  identifier.

*portage 1.8.9_pre3 (5 Feb 2002)

  5 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  only let the backward compatibility algorithm kick in during unmerge since
  it's impossible to correctly detect is in general.

*portage 1.8.9_pre2 (5 Feb 2002)

  5 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  fixed bug in the backward compatibility algorithm

*portage 1.8.9_pre1 (5 Feb 2002)

  4 Feb 2002; G.Bevin <gbevin@gentoo.org> ebuild.sh, emerge, portage.py :
  added binary compatibility slots, this also contains additional code to keep
  the unmerging of packages backwards compatible.
  
  4 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  added back support for the "ebuild help" command which seems to have
  disappeared somewhere along the updates
  
  4 Feb 2002; G.Bevin <gbevin@gentoo.org> make.conf, make.globals :
  added description and default entry for the imlib USE variable
  added flag to prozilla to disable prozilla's waiting for a user's keypress
  when a failure occurs
  
  4 Feb 2002; G.Bevin <gbevin@gentoo.org> output.py :
  bugfix, write read() function instead of red(), doh !
  
  4 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge, portage.py :
  implemented the ! dependency which prevents incompatible packages to be
  installed on the same system at the same time

  4 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  most emerge invocation options now have alternative short flags
  
  4 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  emerge now doesn't unmerge the last version of an installed version by
  default anymore, to really remove all instanced of packages the --all flag
  has to be used, the --safe flag is deprecated
  
  3 Feb 2002; G.Bevin <gbevin@gentoo.org> output.py, emerge,make.globals :
  all output can now be turned to black and white by using the functions in 
  output.py, this determines the mode by checking to NOCOLOR variable in
  make.conf or make.globals

  3 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  made it possible to run emerge --help and --search as non root

*portage 1.8.8-r1 (1 Feb 2002)

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py, ebuild.sh, ebuild.5 :
  added support for a pkg_setup() function which is executed before anything
  else and can be typically used for package configuration actions or required
  system checks

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  implemented the noauto MAINTAINER flags for all relevant ebuild commands

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  make env-update disregard backup files
  
  1 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added --pretend support instead of interactively asking to proceed,
  also added a delay before unmerging though to be sure

*portage 1.8.8 (1 Feb 2002)

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added --safe switch to complement the --unmerge option

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  rewrote the packagename without category support to also graceously handle
  deps specifiers at the beginning, this shouldn't be used in the ebuilds, but
  are very handy when using emerge --unmerge

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added emerge --unmerge support

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  added packagename without category support in the dep_match function

*portage 1.8.7 (30 Jan 2002)

  30 Jan 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  integrated and slightly adapted Brent Rahn's code to support package names
  without category

  30 Jan 2002; G.Bevin <gbevin@gentoo.org> ebuild.sh :
  integrated and fixed Azarah's patch to fix the wrongly generated archive size
  in the digests

*portage 1.8.6-r3 (28 Jan 2002)

  28 Jan 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  disabled warnings about non existant config file paths

  28 Jan 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added verwilst pkgsearch code, which was turned into a seperate class and
  refactored for clarity and execution speed

  28 Jan 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  renamed _xxx vars to _prepart in Vitaly's code addition

*portage 1.8.6-r2 (27 Jan 2002)

  24 Jan 2002; Vitaly Kushneriuk <vitaly@gentoo.org> portage.py :
  Fixed version compare code Also added test script to test future versions.

*portage 1.8.6-r1 (24 Jan 2002)

  24 Jan 2002; Karl Trygve Kalleberg <karltk@gentoo.org> dojar:
  Fixed typos.
  
*portage 1.8.6 (23 Jan 2002)

  22 Jan 2002; G.Bevin <gbevin@gentoo.org> libsandbox.c :
  added an additional check for SANDBOX_ON to optimize the speed in the execvp
  function call. Also removed error messages being printed when the PATH var
  isn't set.
  
  20 Jan 2002; Karl Trygve Kalleberg <karltk@gentoo.org> dojar :
  added dojar shell command as a java JAR handler

  17 Jan 2002; Daniel Robbins <drobbins@gentoo.org> :
  The package chosen by "emerge sys-apps/shadow" now matches that chosen in an
  emerge update or emerge system.  I forgot to add some "*" dep code to the
  dep_nomatch() method; this is now fixed.

*portage 1.8.5 (13 Jan 2002)

  13 Jan 2002; G.Bevin <gbevin@gentoo.org> ebuilds.sh, portage.py:
  added fine grained maintainer settings

*portage 1.8.4 (13 Jan 2002)

  12 Jan 2002; Daniel Robbins <drobbins@gentoo.org> :
  "emerge sys-apps/bash/" now works. (trailing "/" stripped to make
  tab-completion users happy)  This fixes bug #119

  12 Jan 2002; Daniel Robbins <drobbins@gentoo.org> :
  Portage should no longer bomb out if the current working directory doesn't
  exist (has been deleted from underneath).
  
  12 Jan 2002; Daniel Robbins <drobbins@gentoo.org> :
  added "--world" option for "emerge update".   This tells Portage to update
  the base system *as well as* upgrade any packages that are currently
  installed but have new versions available.  This is your standard full system
  update command.  This fixes bug #122

  12 Jan 2002; Daniel Robbins <drobbins@gentoo.org> :
  Added an expandpath() cache which speeds up merging dramatically.

*portage 1.8.3 (11 Jan 2002)

  11 Jan 2002; Mikael Hallendal <hallski@gentoo.org> ebuild.sh:
  added functions econf and einstall. Also made src_compile having a default
  implementation.

*portage 1.8.2 (07 Jan 2002)

  07 Jan 2002; G.Bevin <gbevin@gentoo.org> :
  sandbox included in portage
	
*portage 1.8.1 (30 Dec 2001)

  29 Dec 2001; Daniel Robbins <drobbins@gentoo.org> :
  "emerge update" is now functional!  Although the algorithm really should be
  sound, it is still considered in testing since we may need to tweak some
  dependencies.

  27 Dec 2001; Daniel Robbins <drobbins@gentoo.org> :
  Removed objprelink from the default USE variable.

*portage 1.8.0 (22 Dec 2001)

  22 Dec 2001; Daniel Robbins <drobbins@gentoo.org> :
  I messed up the "transparent .so library" update.  Included is the correct
  fix, which seems to allow glibc to update on my system without any tricks.
  I just merged a new glibc while in X, without using any of glibc's old
  pkg_postinst/pkg_preinst hacks.
  
  21 Dec 2001; Daniel Robbins <drobbins@gentoo.org> make.defaults.5, make.conf.5 :
  Moved make.defaults.5 to make.conf.5 and updated contents.

*portage 1.7.8 (21 Dec 2001)

  21 Dec 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  ebuild install doesn't throw away the compile directory if ebuild has been
  changed and MAINTAINER is set; we now use mv -f to move files into location
  on the filesystem, making our library install method even more robust. It
  should now be totally safe to  upgrade glibc while in X and playing music
  with xmms and surfing the Web and compiling 20 applications at once :)

* portage 1.7.7 (14 Dec 2001)

  14 Dec 2001; Aron Griffis <agriffis@gentoo.org>: portage.py :
  movefile() now unlink()s the destination file first which solves shared
  library install problems.

* portage 1.7.6 (13 Dec 2001)

  10 Dec 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  env_update() now generates an /etc/csh.env file in csh shell format.

* portage 1.7.5 (13 Dec 2001)

  10 Dec 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  added a little fix so a ~ dep isn't satisfied by a *much* later installed
  version; i.e. ~media-libs/freetype-1.3.1 satisfied by
  media-libs/freetype-2.0.5 being installed.
  
  30 Nov 2001; Daniel Robbins <drobbins@gentoo.org> ebuild :
  added a KeyboardInterrupt handler so ^C'ing a running ebuild process doesn't
  produce a Python traceback.

* portage 1.7.4 (29 Nov 2001)

  29 Nov 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  removed an unnecessary quirk in the code preventing virtual packages from
  being in any other category but "virtual".
  
  25 Nov 2001; Daniel Robbins <drobbins@gentoo.org> emerge :
  info file detection code has been improved.  

* portage 1.7.3 (20 Nov 2001)

  20 Nov 2001; Daniel Robbins <drobbins@gentoo.org> pdb, pdb.cgi, xpak :
  used /usr/bin/python instead of /usr/bin/spython.  Fixed.

* portage 1.7.2 (13 Nov 2001)

  13 Nov 2001; Aron Griffis <agriffis@gentoo.org> :
  emake will now try to build in parallel, and if it fails, will retry in
  non-parallel mode.
  
  13 Nov 2001; Daniel Robbins <drobbins@gentoo.org> ebuild.sh :
  an ebuild that used an archive with a name that was part of another archive
  would cause Portage to mess up the digest check.  No longer.

  31 Oct 2001; Donny Davies <woodchip@gentoo.org> make.conf, make.globals :
  comments about merging the fetch programs before trying to use them.

* portage 1.7.1 (30 Oct 2001)

  30 Oct 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  I accidentally broke "=" deps by being sloppy when I added "*" deps.  Trivial
  fix applied.

* portage 1.7 (29 Oct 2001)

  29 Oct 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  strange typo fix in the empty() digraph method.

* portage 1.6.12 (29 Oct 2001)

  29 Oct 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  "*" deps now implemented. "=sys/foo-1*" matches the latest 1.x version/rev of
  sys/foo, but will not match a 2.x version.

  26 Oct 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  various new categories added.

Portage 1.6.11, released 18 Oct 2001
====================================

	*portage.py; device nodes are now not unmerged at all.


Portage 1.6.10, released 18 Oct 2001 
===================================

	*ebuild.sh: A and AA fix; now any A="foo" lines in the ebuild are ignored,
	allowing ebuilds with them to continue working.
	
	*portage.py: remove gnome-apps, gnome-office, gnome-libs, add gnome-extra
	categories.

	*ebuild.sh, portage.py: You can now use USE variables in SRC_URI to
	conditionally include archives.  In MAINTAINER mode, all archives are
	automatically included so that maintainers can check SRC_URIs and also
	generate complete digests.  A new file-based DEPEND and RDEPEND-passing
	mechanism has been added.
	
	*ebuild.sh Now adds filesize to the digest files

Portage 1.6.9, released 15 Sep 2001
===================================

	*portage.py
	unmerge() now does not touch device nodes.  Unlinking them or touching them
	in any way is bad practice.


Portage 1.6.8, released 12 Sep 2001
===================================

	*portage.py
	movefile() will now unlink() destfile if it is a symlink.  Should fix 
	problems where file gets created at symlink target rather than replacing
	the symlink.

	*queryhost.sh (agriffis)
	Parallel pinging and other fixes.

Portage 1.6.7, released 05 Sep 2001
===================================

	*portage.py
	(last-minute fix)
	CONFIG_PROTECT unmerge protection is now observed for symlinks, fifos and
	device nodes.
	
	*portage.py
	Fixes for unmerging CONFIG_PROTECTed files.  Protected files are now *not*
	unlinked from the filesystem.  Messier but safer, and simplifies package
	upgrades.

	*emerge
	Emerge output cleanups for GNU info directory generation.  New --verbose
	mode; new CONFIG_PROTECT scanning feature to let people know when there are
	config files to be updated.  New "--help config" docs to explain how to
	do it.

Portage 1.6.6, released 01 Sep 2001
====================================

	*portage.py
	Upgraded directory merging over existing objects.  Existing symlinks that
	point to existing directories will be kept and used as is; directories will
	be used as-is; any other objects (broken symlinks, files) will be copied
	to origfilename.backup and a ne directory will be created in its place.

Portage 1.6.5, released 31 Aug 2001
====================================
	
	*emerge 
	Fixes for handling multiple ebuilds, packages and/or dependencies on
	the command-line.

	*portage.py 
	An optimization to the digraph class so that the firstzero() method finds
	matches in close to the order that keys were added to the digraph.
