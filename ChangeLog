# ChangeLog for Portage; the Gentoo Linux ports system 
# Copyright 2002 Gentoo Technologies, Inc.; Distributed under the GPL v2

  25 Jun 2002; Martin Schlemmer <azarah@gentoo.org> bin/prepallstrip :
  Change "strip --strip-unneeded" to "strip --strip-debug".  This fixes
  bug #2702,#3929,#4027.

*portage-2.0.5 (24 Jun 2002)

  23 Jun 2002; Daniel Robbins <drobbins@gentoo.org> conf files: removed
  references to non-functional FTP_PROXY and HTTP_PROXY and added a note about
  how to use the correct vars (ftp_proxy and http_proxy.)  Closes bug #1664.
  Also added note about RSYNC_PROXY, closing bug #2332.

  23 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: removed
  "dependency too short" checks which weren't working and were causing deps
  like "mc" and "ed" to be rejected as invalid rather than being expanded.

  23 Jun 2002; Daniel Robbins <drobbins@gentoo.org> emerge: upgraded "clean"
  code to be more robust, consistent. Closes bug #3967.

*portage-2.0.4 (20 Jun 2002)

  20 Jun 2002; Daniel Robbins <drobbins@gentoo.org> in the 2.0.4 ebuild itself:
  added back tbz2tool symlink which was mistakenly removed.  Also changed the
  way we compile portage.py stuff so that we remove the previously compiled
  files, just in case clock skew cause them to seem more recent than they
  really are.  Python byte-code compilation moved to pkg_postinst()

  20 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fixed up the
  fetch() code so that invalid digests don't cause a traceback.

  20 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: some of the new
  transplanted virtuals code assumed that profiledir was set, which is not 
  required.  This code has now been fixed to not make that assumption.

*portage-2.0.3 (20 Jun 2002)

  20 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fixed two typos
  pointed out by stroke and g2boojum.  These fix unmerge and some aspect of
  virtuals handling, which was previously causing a traceback.
  
  19 Jun 2002; Daniel Robbins <drobbins@gentoo.org> emerge: emerge -eup world
  now will ignore world entries if it isn't really installed locally; in 2.0.1,
  --emptytree would auto-enable all world entries, leading to inconsistent
  package lists between --emptytree and without.

*portage-2.0.2 (19 Jun 2002)

  19 Jun 2002; Daniel Robbins <drobbins@gentoo.org> make.conf.ppc,
  make.globals.ppc: integrated these files into our sources.
  
  19 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fixed a bug
  where ROOT="" would not get properly converted to ROOT="/".
  
  18 Jun 2002; Daniel Robbins <drobbins@gentoo.org> emerge: Portage 2.0+ has
  fixed "!" depend matching support, but some code in emerge was designed to
  anticipate the incorrect behavior.  This emerge code has been fixed to work
  correctly.  This closes my part of bug #3834.
  
  18 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: fixed
  bug #2444, where emerge fails when "--emptytree" and "--onlydeps" are used at
  the same time.
  
  18 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: new
  fakedbapi for doing emptytree calculations; emptytree upgrades in emerge.
  "emerge -upe world" now works correctly, accounting for items in the world
  profile.  Yay!  Bugs #3832 and #1911 fixed.
  
  18 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge:
  Integrated new aux_get() method into our portdbapi.  aux_get() provides a
  standardized way to get cached information about ebuilds, and is now fully
  integrated into Portage and emerge search.

  18 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fixed a bug
  where dep_nomatch() was testing for None rather than a "zero" condition,
  causing dep_nomatch() to choke on match()'s [] return value.
  
  17 Jun 2002; Daniel Robbins <drobbins@gentoo.org> emerge: added an exception
  handler to catch invalid regular expressions and avoid a traceback.
  
  17 Jun 2002; Daniel Robbins <drobbins@gentoo.org> sandbox.c: added
  /var/cache/ccache to sandbox "write ok" list, closing bug #3028.

*portage-2.0.1 (16 Jun 2002)

  16 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: fixed a
  virtuals expansion bug that would cause virtuals to be consulted too early.

*portage-2.0 (16 Jun 2002)

  16 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, ebuild.sh,
  emerge: turbo-ified Portage, new Portage db API and many other fixes.
  Unmerging now works again (bug introduced several releases ago.)  I
  originally wanted to hold off on releasing 2.0, but since several major bugs
  are fixed, we need to get these fixes out to our users ASAP.  We will be
  releasing 2.1 in about a week which should include additional refinements.

  16 Jun 2002; Daniel Robbins <drobbins@gentoo.org> repoman: New repoman
  commit/check QA tool for developers.

  10 Jun 2002; Dan Armak <danarmak@gentoo.org> make.conf: Update the ibiblio
  mirror path; it is now www.ibiblio.org/pub/Linux/distributions/gentoo.

  10 Jun 2002; Martin Schlemmer <azarah@gentoo.org> ebuild.sh : Some users have
  $TMPDIR to a custom dir in their home ...this will cause sandbox errors with
  some ./configure scripts or libtool, so set it to $T.

  10 Jun 2002; Martin Schlemmer <azarah@gentoo.org> portage.py : Merge in the
  ld.so.preload changes.  Also updated spawn() to only run sandbox if
  buildphase is one of clean, unpack, compile or install. This should fix the
  handler not detecting some instances of sandbox running.  Updated ebuildsh()
  to set buildphase="" on spawn exit.

  10 Jun 2002; Martin Schlemmer <azarah@gentoo.org>
  portage.py.ldsopreload,testsandbox.sh : Add support to test if another
  sandbox is running, if so dont delete /etc/ld.so.preload on kill.  I did not
  commit this to portage.py, as it is a bit more changes than we originally
  though.

  05 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: doebuild() now
  has proper logic for digest generation.  Digest will now get regenerated if
  "ebuild digest" is run, even if "digest" is in FEATURES.
  
  04 Jun 2002; Daniel Robbins <drobbins@gentoo.org> emerge: fixed typo in
  "inject" documentation.
  
  02 Jun 2002; Martin Schlemmer <azarah@gentoo.org> bin/dosym: changed the
  command used from "ln -sf" to "ln -snf" as it created a symlink in the target
  directory if the linkname already existed (only if the target is a
  directory).  Im guessing this should be fixed in the python merged code if
  symlinks are not unlinked before the new is merged into place .. will add a
  bug later.

*portage-1.9.14 (01 Jun 2002)

  01 Jun 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: when a file to
  be merged is identical to the one currently on disk (using the md5 test), we
  now at least correctly update the target's mtime and atime so that cleaning
  will work correctly.
  
  27 May 2002; Daniel Robbins <drobbins@gentoo.org> bin/do*: changed "return"s
  to "exit 1".  Closes bug #3078.

*portage-1.9.13 (21 May 2002)

  21 May 2002; Grant Goodyear <g2boojum@gentoo.org> emerge.1: Updated man page.
  Thanks to carpaski@twobit.net.  

  20 May 2002; Daniel Robbins <drobbins@gentoo.org> emerge: a fix for dep
  regeneration; stale dep cache entries should now be properly regenerated.

*portage-1.9.12 (16 May 2002)

  16 May 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: the settings
  for A and AA were swapped; this has now been fixed, closing bug #1634.
  
  15 May 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fixed up some
  quirks in the new fetch code which were reported by Wout Mertens.  Thanks
  Wout!

*portage-1.9.11 (13 May 2002)

  13 May 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: addition of 
  third-party mirroring code.  "mirror://sourceforge/foo.tar.gz" will use the
  /usr/portage/profiles/thirdpartymirrors file to define the mirror it will
  download from.  Multiple mirrors for a single keyword can be specified on a
  single line.  This code was based on the good work of Ryan Phillips.
  
  13 May 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: (entry on behalf
  of jnelson) -- we now have new KV detection/setting code that uses
  /usr/src/linux/include/linux/version.h to determine the kernel version -- the
  right way of doing things.  KV is set to "" if the kernel is not available or
  not configured.
  
  13 May 2002; Daniel Robbins <drobbins@gentoo.org> emerge: "abspath[x]" =>
  "abspath(x)" typo fix.  Also added 2-liner to allow for "emerge unmerge" to
  specify "foo/bar-1.0" rather than requiring "=foo/bar-1.0."  Also fixed
  problems when specifying the names of actual ebuilds in /var/db/pkg to
  unmerge.
  
*portage-1.9.9 (06 May 2002) ??

  08 May 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: An empty
  USE_ORDER (due to an out-of-date /etc/make.globals) would cause USE to always
  be empty.  I added a reasonable default USE_ORDER if USE_ORDER is not found
  in any of the config files, fixing this problem.
  
  06 May 2002; Daniel Robbins <drobbins@gentoo.org> emerge: post bug #1841
  cleanups; converted from .hasnode() to .dep_match() (correct) in
  getworldlist().

*portage-1.9.8 (06 May 2002)

  06 May 2002; Daniel Robbins <drobbins@gentoo.org> emerge: 2 fixes that seemed
  to get fried/zapped: bug #1841 and fixing an emerge sync error code to be
  more understandable.

*portage-1.9.7 (06 May 2002)

  06 May 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: initial
  bunch of robustness/error-handling fixes.  Emerge should now report a
  comprehensible error message for errors in DEPEND and RDEPEND rather than
  giving a traceback.  Fixed dep_depreduce() to catch errors rather than
  passing them on to dep_bestmatch() (which doesn't check for errors and
  assumes correct input)
  
  02 May 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: typo fix for
  S_ISFIFO call; thanks woodchip!

*portage-1.9.6 (02 May 2002)

  02 May 2002; Daniel Robbins <drobbins@gentoo.org> make.conf: SYNC variable
  correctly set to use our DNS round-robin system (rsync.gentoo.org).

*portage-1.9.6_pre2 (01 May 2002)

  01 May 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: config file
  protection upgrade; we now record md5sums of previously-merged config protect
  files in /var/cache/edb/config; we use this information to avoid merging
  files that have been merged by us before (if it is safe to do so).  This 
  doesn't solve the problem of rolling back to a previously-merged version of
  a config file; we need to add cvs headers to every config file to get that
  to work.
  
*portage-1.9.6_pre1 (01 May 2002)

  01 May 2002; Daniel Robbins <drobbins@gentoo.org> emerge: added "inject"
  capability to artificially satisfy a dep -- for situations when you don't
  want Portage to do it for you because you've taken care of it already.
  
  01 May 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: totally
  rewrote emerge's unmerge code.  The original code (added by Bevin) was a bit
  too cryptic and "big" for my taste.  Also added two new capabilities to
  portage.py's vartree: .getslot() and .gettimeval().  getslot() returns the
  slot value of a cat/pkg-v, if any, and gettimeval() returns a "time value"
  (based on mtime/COUNTER value) that can be used to determine the order in
  which packages got merged.  The purpose of these improvements were to revamp
  the existing Portage code that could only unmerge a db entry if there was a
  corresponding ebuild file.  This conflicted with the ability to "inject"
  packages (see above), so it needed to be changed.  Also fixed some bugs along
  the way.
  
  01 May 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh: einstall now
  accepts arguments, closing bug #2275.  Thanks seemant! :)
  
  01 May 2002; Daniel Robbins <drobbins@gentoo.org> make.globals: switch SYNC
  var from cvs.gentoo.org to rsync.gentoo.org, and gentoo-x86-portage to
  gentoo-portage.
  
  30 Apr 2002; Daniel Robbins <drobbins@gentoo.org> emerge: now checks for
  errors (caused by bad deps) returned by create() and syscreate().

*portage-1.9.5 (29 Apr 2002)

  29 Apr 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh: added jnelson's
  KV_extract.awk script which extracts the kernel version from the actual
  kernel sources Makefile, making our KV setting much more robust!  Thanks Jon
  :)
  
  29 Apr 2002; Daniel Robbins <drobbins@gentoo.org> emerge: correctly fixed
  emerge search examples to use single quotes (to turn off globbing.)  This
  closes bug #1609.

  29 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: virtual entries
  for no-longer-installed packages now get automatically removed on unmerge.
  This closes bug #2255 and #1891 (Thilo Bangert's comment on #1891 is also
  fixed.)

*portage-1.9.4 (29 Apr 2002)

  29 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Added support
  for RESTRICT="nomirror".  If "mirror" is defined in FEATURES and "nomirror"
  is defined in RESTRICT, then files will not be fetched.
  
  29 Apr 2002; Daniel Robbins <drobbins@gentoo.org> emerge: Fixed docs for
  "unmerge", added docs for "--oneshot".  Closes bugs #2156 and #2182.

  29 Apr 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh: Fix for USE
  troubles; confirmed by Azarah as working :)  Also, we now strip the path
  from "KV" as we should.

*portage-1.9.4_pre1 (26 Apr 2002)

  26 Apr 2002; Daniel Robbins <drobbins@gentoo.org> tarball.sh: no longer
  necessary for VERSION to equal "@portage_version@" to get the version
  auto-set.  VERSION can now be set to anything and tarball.sh will get it
  right.
  
  26 Apr 2002; Daniel Robbins <drobbins@gentoo.org> emerge: I've started work
  on revamping/improving the "blocks" system to get ready to fix bug #1891.
  Already fixed a bug where "blocks" ("!" deps) print out the wrong blocking
  package name. This is now fixed.  Blocks need additional testing.
  
  26 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, ebuild.sh, use:
  "use" is now a bash builtin function rather than an external python-based
  command.  This appears to fix the USE inconstencies, as it should, thereby
  closing bug #2000.

*portage-1.9.3 (24 Apr 2002)

  24 Apr 2002; Jon Nelson <jnelson@gentoo.org>: portage.py, chkcontents:
  Emulate fchksum's md5 checksum routine.  Closes bug #2787.
  
  23 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: emerge: invalid
  short options result in an exit.  Closes bug #2025.
  
  22 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: emerge: rsync zlib
  compression enabled by default.

*portage-1.9.2 (21 Apr 2002)

  21 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: signal
  handler now zaps /etc/ld.so.preload if it's there -- this prevents it
  from hanging around and causing sandbox badness.
  
  21 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: emerge: fixed an
  error where --emptytree mode wouldn't really have a fully empty tree,
  due to the emptytree.inject() coming before the emptytree.root=None;
  the inject() caused a recalc of the USE vars, which caused the tree
  to become partially populated and it wasn't cleared.  This closes bug
  #1897.
  
  21 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: package
  building now executes the "setup" stage along with the unpack, compile,
  install stages so that global variables can be shared.  This fixes an issue
  with woodchip's new apache ebuild and closes bug #1813.

*portage-1.9.1 (16 Apr 2002)

  16 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: tiny (and forgotten)
  quick fix.

*portage-1.9.0 (16 Apr 2002)

  16 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: fetching
  should now try *all* alternate download locations, closing bug #1544. 
  Yay!
  
  15 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: emerge: "emerge R" now
  works correctly, closing bug #1094.
  
  15 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: ebuild.sh: *'s and ?'s in
  DEPEND and SRC_URI syntax should no longer get glob-expanded to files in
  /usr/portage.  This fixes some cryptic bugs.  It also closes bug #1473.
  
  15 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: emerge --debug
  now works again.  Closes bug #1437.
  
  15 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: moved argument
  check to the beginning of the doebuild() function to prevent "ebuild
  foo.ebuild fart" from causing the md5sums to be checked before recognizing
  that "fart" is not a valid command.  Closes bug #1823.
  
  15 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: 'USE="-foo"
  emerge bar' should now work correctly and consistently.  Fixes to the config
  class.  Closes bug #1455.
  
  15 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: applied
  jnelson's patch to properly kill all children when interrupted with ^C
  
  15 Apr 2002; Donny Davies <woodchip@gentoo.org>: make.conf: added a
  RESUMECOMMAND for lukemftp.
  
  15 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: fixed up some
  "zing" logic inside the merge code (fixing variable being used before
  assignment errors)
  
  15 Apr 2002; Jon Nelson <jnelson@gentoo.org>: src/sandbox/Makefile,
  src/sandbox/problems/Makefile, src/sandbox/problems/sandbox_dev_fd_foo.c,
  src/sandbox/sandbox.c: Cleaned up Makefiles somewhat to take advantage of GNU
  Make, added '/dev/zero' and /dev/fd/' (<- note trailing slash) to the list of
  items accessible safely from the sandbox.  Added sandbox_dev_fd_foo.c to test
  for /dev/fd/<xx>.  The test is almost verbatim from the autoconf test suite.

  13 Apr 2002; Martin Schlemmer <azarah@gentoo.org>: ebuild.sh:
  Export $S and $D in dyn_compile and dyn_install, as our patched
  version of libtool uses these to fixup .la files.

*portage-1.8.19 (09 Apr 2002)

  08 Apr 2002; Geert Bevin <gbevin@gentoo.org>: emerge: Removed --all switch to
  emerge unmerge and clea.  Added emerge prune which is the same as old emerge
  unmerge.  Emerge unmerge removes all instances again without any proctedtion,
  as before.  Added reporting of Omitted versions due to dep selectors.
  Renamed Removing and Keeping to Selected and Protected

  08 Apr 2002; Geert Bevin <gbevin@gentoo.org>: emerge, portage.py: Better
  unmerge and clean reporting.  Added homepage output to emerge --search.
  Bugfix when specifying a package without category that doesn't exist.

*portage-1.8.18 (07 Apr 2002)

  07 Apr 2002; Geert Bevin <gbevin@gentoo.org>: make.globals, emerge:
  Simplified unmerge functionality. Deprecated the CLEANMODE var,
  emerge clean now removes both revisions and slots automatically,
  emerge unmerge now removes all versions and revisions by default.
  Both understand world and system targets, and the --all option which doesn't
  check which packages are old and outdated.
  Documentation fixes.
  AUTOCLEAN var addition and added the autoclean functionality.
  
*portage-1.8.17 (05 Apr 2002)

  05 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: no longer
  print out the counter number after a merge.  This information should not
  need to be known by end-users.
  
  05 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: sandbox.c: patched to
  allow access to /dev/vc from sandbox, allowing vim and screen to compile
  correctly from console.
  
  05 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: fixed a bug
  that prevented md5 digests from being compared on archives.
  
  04 Apr 2002; Daniel Robbins <drobbins@gentoo.org>: portage.py: Parse errors
  in /etc/env.d files no longer cause a traceback.

*portage-1.8.16 (04 Apr 2002)

  04 Apr 2002; Geert Bevin <gbevin@gentoo.org> portage.py, emerge : Forgot to
  commit my changes, this is an assembled version of both drobbins's and my
  changes

*portage-1.8.15 (04 Apr 2002)

  04 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Fixed a
  semi-long standing bug where I was comparing atimes rather than mtimes when
  seeing if dep caches were stale.  This fixes a bug originally reported by Dan
  Armak.
  
*portage-1.8.14 (04 Apr 2002)

  04 Apr 2002; Geert Bevin <gbevin@gentoo.org> emerge:
  Fixed short options for --all, --safe and clean.
  
*portage-1.8.13 (04 Apr 2002)

  04 Apr 2002; Geert Bevin <gbevin@gentoo.org> portage.py, emerge:
  Added emerge --all clean and emerge --safe unmerge.
  Made the counter updates atomic so that multiple merges can happen without
  risking counter clashes.
  Updated --help.
  Fixed short options bug that prevented two seperate short options to be
  specified successively.

*portage-1.8.12 (04 Apr 2002)

  04 Apr 2002; Geert Bevin <gbevin@gentoo.org> portage.py, emerge:
  implemented "emerge clean" with oldrevs, oldversions and oldslots options for
  the make.conf/make.globals CLEANMODE variable.
  
  03 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Added an
  indentation fix to prevent merge from dying if a file attempts to install
  itself on top of an existing directory.  Closes bug #1498.

*portage-1.8.11.1 (03 Apr 2002)

  03 Apr 2002; Geert Bevin <gbevin@gentoo.org> portage.py: important fixes
  for movefile() -- changed the order of ownership / permissions settings since
  suid/guid bits were overwritten, added support back for 'ebuild config' since
  it was accidentally left out

*portage-1.8.11 (02 Apr 2002)

  02 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: important fixes
  for movefile() -- ownership now preserved across filesystems, mv -f fallback
  for special files, other optimizations and robustness improvements.  Important
  fixes all-round.

  02 Apr 2002; Geert Bevin <gbevin@gentoo.org> emerge: 
  fixed bad indentation of a part of the code that made unmerging multiple
  packages behave badly

*portage-1.8.10 (01 Apr 2002)

  01 Apr 2002; Daniel Robbins <drobbins@gentoo.org> make.globals: removed USE
  settings from make.globals.

  01 Apr 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: In trying to fix
  the glibc merge bug, we rewrote movefile() and it now runs blazingly fast.  I
  also tweaked the code to remove the need for an ">>> Updating mtimes..."
  stage.  This is all done dynamically now.  *Much* faster.  And hopefully
  solid for glibc upgraders.

*portage-1.8.9.4 (01 Apr 2002)

  31 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: adapted
  movefile() which should preserves timestamps and ownership on files and
  symlinks it moves.

*portage-1.8.9.3 (31 Mar 2002)

  31 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: promising
  rewrite of movefile() not only will probably fix glibc merge bug but also
  speeds up merging at least 20x!  Calling "mv" for every file really make
  things super-slow!

*portage-1.8.9.2 (31 Mar 2002)

  31 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: desperate attempt
  to fix movefile() bug... a hack really.  glibc merges still dying.

*portage-1.8.9.1 (31 Mar 2002)

  31 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: it appears that
  movefile() (using "/bin/mv") can still die if moving a new symlink on top of
  an existing library symlink.  Upon failure, we now use a fallback mechanism
  to use "/bin/sln" to create the new symlink safely.

*portage-1.8.9 (30 Mar 2002)

  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: tiny cosmetic
  fix for digest generation.
  
  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> emerge: entries in the
  world profile will be ignored if at least one version of the package in
  question isn't already merged.  Prevents "--update world" from remerging
  packages that have since been unmerged.
  
  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> various: changing all
  references from /usr/bin/python to /usr/bin/python2.2.
  
  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> db-update.py: moving this
  script here from FILESDIR.
  
  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: stuff doesn't
  get added to the world profile if it is already an essential ("*") package in
  the system profile.  Keeps things clean and flexible.

*portage-1.8.9_pre38 (30 Mar 2002)

  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: resolve_key()
  didn't call load() on mapped virtuals, resulting in inconsistent resolution
  of virtual keys.  Now fixed; thanks to woodchip for the bug report.

*portage-1.8.9_pre37 (30 Mar 2002)

  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: specific
  provides (dev-lang/python-2.2) will be converted to their generic form
  (dev-lang/python) before being recorded.

*portage-1.8.9_pre36 (30 Mar 2002)

  30 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: new
  virtuals fixes and a db-upgrade.py script in the ebuild to solve another
  virtuals problem.

*portage-1.8.9_pre35 (29 Mar 2002)

  29 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: digest
  generation fixes; emerge --update will now update dependents even if the main
  package hasn't been updated.  getdict() fix, fixing a traceback.

*portage-1.8.9_pre34 (28 Mar 2002)

  28 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Added an indent
  fix for the new virtuals code, eliminating a traceback.  Tweaked digest handling,
  fixing a cosmetic error.

*portage-1.8.9_pre33 (28 Mar 2002)

  28 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: tweaked digest
  creation in doebuild() to hopefully avoid creating digests twice.  I hope I
  didn't break anything in the process.

  28 Mar 2002: Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: "emerge
  update" is now "emerge --update"; "world" added back.  New world
  implementation that works like this ... if you type "emerge media-gfx/gimp",
  media-gfx/gimp will be added to the "world" favorites file in
  /var/cache/edb/world.  This world file is added to the system profile in
  order to create the set of "world" packages to merge.  You can manually put
  specific deps (for pinning) in /var/cache/edb/world and they won't get
  overwritten.  To prevent a package that you specify on the emerge
  command-line from being added to the world profile, use the "--oneshot"
  option, which tells emerge that it should be merged once but not updated.
  
  28 Mar 2002: Daniel Robbins <drobbins@gentoo.org> portage.py: New virtuals
  implementation; new virtual info is recorded in /var/cache/edb/virtuals;
  virtuals data is created by merging the profile virtual info with the new
  edb/virtuals file.  Note: We no longer add virtual package entries to
  /var/db/pkg.  This change solves the bug where virtual files get auto-updated
  by pkg-update, and also solves the bug where doing an "emerge --update world"
  will cause ssmtp to be merged in order to satisfy the virtual/mta dep (which
  you already have satisfied by postfix, for example).  Now, postfix will be
  updated if necessary, but that's it. :)

*portage-1.8.9_pre32 (22 Mar 2002)

  22 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fixed a bug
  related to scanning for available binary packages, which would cause emerge
  to die.
  
  21 Mar 2002; Dan Armak <danarmak@gentoo.org> portage.py: added ECLASSDIR
  (=$PORTDIR/eclass) to settings exported by python side to bash side.
  ebuild.sh: remove ECLASSDIR setting to use the one now provided by
  portage.py.  Also, clean inherit() and make it use debug-print().

*portage-1.8.9_pre31 (21 Mar 2002)

  21 Mar 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh: Added Dan
  Armak's patch to enable eclasses. :)
  
  21 Mar 2002; Grant Goodyear <g2boojum@gentoo.org> portage.py: 
  Added a drobbins patch to at line 469.  Should fix emerge rsync
  problem when /etc/make.profile doesn't exist.

*portage-1.8.9_pre30 (20 Mar 2002)

  20 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: emerge
  --emptytree now works again and I added a new --nodeps option to emerge as
  well.

*portage-1.8.9_pre29 (20 Mar 2002)

  20 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: CONTENTS files
  now record the correct path when ROOT!="/".

*portage-1.8.9_pre28 (20 Mar 2002)

  20 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: an
  /etc/make.profile dir is now optional and portage will work if it's missing
  or is a broken symlink.
  
  20 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fix load()
  method in packagetree() class.

*portage-1.8.9_pre27 (19 Mar 2002)

  19 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py:
  /etc/make.profile/packages wasn't correctly masking core system packages;
  fixed.

*portage-1.8.9_pre26 (18 Mar 2002)

  18 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: configuration
  settings don't get loaded from ${ROOT}/etc anymore, just /etc.  This
  simplifies the creation of a new build image.
  
  18 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Don't expect a
  digest file if SRC_URI is set to "" or undefined.

  18 Mar 2002; Daniel Robbins <drobbins@gentoo.org>: RDEPEND was getting set
  to DEPEND even if there was an RDEPEND="" in the ebuild.  This has now been
  fixed and RDEPEND will only get to DEPEND if RDEPEND has unset (not "unset
  or null", as it was before this fix.)
  
  18 Mar 2002; Daniel Robbins <drobbins@gentoo.org>: emerge: circular
  dependencies error will result in the digraph dependencies being printed to
  stdout, greatly simplifying debugging.
  
  18 Mar 2002; Geert Bevin <gbevin@gentoo.org>: src/sandbox/problems: Added
  several sample implementations to reproduce reported bugs.

  18 Mar 2002; Geert Bevin <gbevin@gentoo.org>: libsandbox.c: All paths are now
  checked for multiple successive slashes anywhere, this closes bug 827.
  Performance should be slightly improved for other apps on the system for who
  the sandbox is not turned on.
  
  14 Mar 2002; Daniel Robbins <drobbins@gentoo.org>: output.py: quick fix to
  turn off white color output -- not good for terminals with white background.
  This closes bug #1135.
  
  11 Mar 2002; Daniel Robbins <drobbins@gentoo.org>: Applied karltk's version
  information patch.  Portage.py now contains version information, and this
  info is reported by "emerge --version".  Thanks Karl! :)
 
*portage-1.8.9_pre25 (11 Mar 2002)
 
  10 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge: roll
  back portagetree incremental db optimizations to fix an important bug (no
  package.mask calculations being done.)  Emerge will now abort if a dependency
  can't be satisfied rather than printing just a warning.

*portage-1.8.9_pre24 (09 Mar 2002)

  09 Mar 2002; Daniel Robbins <drobbins@gentoo.org> emerge: fixed missing
  "--clean" option so "--clean rsync" should work again.  Also converted emerge
  to work with our new db layout (db objects are in the portage module now).

  09 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Added USE
  ordering, a concept envisioned by Vitaly Kushneriuk.  The idea is to allow
  customization of how Portage resolves USE variables.  The default is
  "env:conf:auto:defaults" (set in the USE_ORDER variable -- this default is
  now in make.globals but as always you should set your custom USE_ORDER in
  make.conf if desired.)  So, my default, USE settings will be calculated as
  follows.  The USE variables will be grabbed from the
  /etc/make.profile/make.defaults file (this is "defaults".) Then, the
  /etc/make.profile/use.defaults file will be consulted.  This file lists (one
  per line) a USE variable and a corresponding dependency.  If the dependency
  is satisfied, the USE variable is auto-enabled and added to our working list
  (this is "auto").  Then /etc/make.conf is consulted, so that the user has the
  option of force-enabling (with USE="foo") or force-disabling (with
  USE="-foo") any USE variables as desired (this is "conf".)  Then, the
  environment is consulted, allowing easy modifications from the command-line
  (this is "env").  Also added is the ability for USE settings to be
  dynamically regenerated in an efficient way as packages are merged.  So,
  right after xfree is emerged, the "X" use variable can be immediately
  auto-enabled.  Thanks to Vitaly for providing the vision for this.

*portage-1.8.9_pre23 (08 Mar 2002)

  09 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: our portage
  tree and /var/db/pkg tree now uses incremental caching rather than doing
  an exhaustive scan on startup.  This should speed up this respective code
  by 2-30x depending on how many packages you're emerging.  This involved
  quite a few changes to the code, and there could be some bugs, although I
  tried to be very careful.  These changes could also break code that access
  internal .tree[] dictionaries directly. 
  
  08 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: SRC_URIs with
  USE-enabled ( ) clauses in them weren't working because I was iterating
  through multi-level lists without flatten()ing them.  Now fixed.
  
  07 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: We no longer
  depend upon a file being unmerged.  We try to unlink during unmerge() in a
  "try" clause, with an exception for OSError.  If the directory is immutable
  then Portage continues gracefully.  This closes a bug reported by Verwilst --
  unmerging an old baselayout would die when it tried to delete /dev/shm.
  Fixed in Portage to eliminate these kinds of problems in the future.

*portage-1.8.9_pre22 (07 Mar 2002)

  07 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: I had
  sys.exit() in doebuild()'s fetch section.  Converted to "return 1" and
  "return 0" to be emerge --fetchonly friendly.  Thanks to Dan Armak for the
  bug report.

*portage-1.8.9_pre21 (07 Mar 2002)

  07 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: fixed symlink
  merge bug related to "safe" emerges.  This should fix problems of Portage
  dying when merging certain things.  I'm hoping that this fix will give us a
  solid merge implementation.  It should.  Thanks to Bart Verwilst for tracking
  down a merge problem that I could reproduce.

*portage-1.8.9_pre20 (06 Mar 2002)

  06 Mar 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh, others: users
  can now forcefully disable stripping of their ebuild binaries by adding a
  RESTRICT="nostrip" to their ebuild.  Additionally, the DEBUG variable has
  been renamed to DEBUGBUILD to prevent namespace collisions.  This closes bug
  #868.
  
  06 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Fixed a
  long-standing bug where the pkg_preinst() and pkg_postinst() functions being
  called came from the existing package ebuild in /var/db/pkg rather than the
  new ebuild being merged.  pkg_prerm() and pkg_postrm() still use the ebuild
  in /var/db/pkg, which is correct.  Thanks to Dan Armak for tracking down this
  bug.

*portage-1.8.9_pre19 (05 Mar 2002)
  
  05 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Fixed two bugs
  reported by Dan Armak relating to incomplete (not missing) message digests.
  They should now get regenerated automatically is "digest" is in FEATURES and
  not confuse the fetch code.

*portage-1.8.9_pre18 (04 Mar 2002)

  04 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Bug fix in
  dep_bestmatch(); rev comparison now works correctly and dep_bestmatch will
  properly handle 2-digit revisions in particular.  This closes bug #952.
  
  04 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Thanks to a
  bug report by Bruce Locke, the long-standing bug where symlinks with
  different mtimes would still get unmerged is now fixed.  This allows glibc
  (of all things) to be unmerged safely.  We needed this fix.  Closes bug #964.
  
  03 Mar 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : KDEDIR ->
  KDEDIRS (fixing my typo)

*portage-1.8.9_pre17 (27 Feb 2002)

  27 Feb 2002; Daniel Robbins <drobbins@gentoo.org> emerge : --help
  documentation is now up-to-date; short options tweaked.
  
  26 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Fixed an
  unmerge error caused by digests now being recorded in lowercase.  unmerge now
  compensates for 100% backwards compatibility.  Moved "continue" outside of
  "try" block since this is disallowed in Python.  This fixes a python warning
  during fetch.
  
  26 Feb 2002; Geert Bevin <gbevin@gentoo.org> bin/dohtml : Added support for
  installing .gif files too since quite some docs still ship with those instead
  of .jpg or .png.

*portage-1.8.9_pre16 (25 Feb 2002)

  25 Feb 2002; Daniel Robbins <drobbins@gentoo.org> emerge : emerge syntax
  changed back to "classic" style; replaced dots with spinner, did a major code
  cleanup and removed pieces that will be rewritten for 1.8.9 final.  emerge
  documentation isn't up-to-date at all; I'm holding off on the --help rewrite
  until after 1.8.9 features have been finalized (soon!)
 
  25 Feb 2002; Daniel Robbins <drobbins@gentoo.org> : Added RESTRICT variable
  to ebuilds.  If RESTRICT="fetch" is set in the ebuild, it means that the
  files listed in SRC_URI are simply filenames and that the real files must be
  downloaded manually.  This allows us to deal with realplayer, since
  overriding dyn_fetch is no longer an option now that we have the fetch code
  in python.  Also added a cosmetic tweak to emerge during info file
  regeneration.
  
  25 Feb 2002; Daniel Robbins <drobbins@gentoo.org> cnf/* : updated ${x} ->
  ${URI} in $FETCHCOMMAND.

  24 Feb 2002; Daniel Robbins <drobbins@gentoo.org> Fixed another fetch bug
  where the download wouldn't cycle to alternate mirrors (it'd get stuck on
  the first download location)

*portage-1.8.9_pre15 (24 Feb 2002)

  24 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: some fixing of
  the merge code; added automatic digest generation when "digest" is in
  FEATURES; made the fetch() code not depend on a pre-existing digest.  This
  should fix all known digest/fetch issues.

*portage-1.8.9_pre14 (23 Feb 2002)

  23 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: If you have a
  file that's hosted directly on our master ibiblio mirror, you can specify
  it in SRC_URI as "http://mirror/myfile.tar.bz2".  "http://mirror" will be
  expanded to the first mirror defined in GENTOO_MIRRORS, or our master ibiblio
  mirror if no mirrors are defined.  Groovy.  This closes bug #627.
  
  23 Feb 2002; Daniel Robbins <drobbins@gentoo.org> make.globals, emerge,
  portage.py: wget is no longer hardcoded; FETCHCOMMAND is enabled again, but
  uses ${FILE} and ${URI} instead of ${x} and ${y} now.  Added download
  resuming, which requires the definition of RESUMECOMMAND (added to
  make.globals).  Updated spawn() so that when it's called as spawn(foo,free=1)
  as an argument, sandboxing is turned off.  Replaced all calls to
  os.system(foo) with spawn(foo,free=1), since os.system() messes with signal
  handling.  Added a default SIGINT signal handler to portage.py so that ^C
  interrupts are handled correctly (portage will immediately exit with a return
  code of 1).  This has been tested and works for ebuild and emerge.  These
  additions should also close bug #407 and #760.
 
  23 Feb 2002; Daniel Robbins <drobbins@gentoo.org> emerge: spython -> python
  fix; resolution of cvs merge conflict.  Removed edepend assignment bug
  reintroduced in Geert's commit; added comment explaining why the new code is
  needed so it doesn't get removed again ;)

  22 Feb 2002; Geert Bevin <gbevin@gentoo.org> emerge: removed spurious cvs
  conflict lines fixed bug in the cleanup code where different slots weren't
  handled too well

*portage-1.8.9_pre13 (22 Feb 2002)

  22 Feb 2002; Daniel Robbins <drobbins@gentoo.org> various: fix /bin/sh
  symlink merge problems and massively simplified movefile() code.  Added back
  some emerge code so that "emerge --search rsync" doesn't run rsync.

*portage 1.8.9_pre12 (22 Feb 2002)

  22 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: everything
  should now generate *lowercase* md5sums, fixing problems with digest 
  backwards compatibility.
  
  22 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: changed
  position of digest generation call so that "ebuild digest" now works if the
  sources have not yet been downloaded.
  
*portage 1.8.9_pre11 (22 Feb 2002)

  22 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: unmerging now
  works correctly.

*portage 1.8.9_pre10 (22 Feb 2002)

  22 Feb 2002; Daniel Robbins <drobbins@gentoo.org>: "emerge" didn't like the
  new portage.py (fixed); A merge database bug (fixed).  Fixing the merge bug
  should also result in merges happening much faster than before, maybe up to 3
  times as fast.  We no longer resolve symlinks when testing protection paths.

*portage 1.8.9_pre9 (21 Feb 2002)

  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org>: moved entirety of Portage
  download/digest code from ebuild.sh (bash) to portage.py (python).  No
  support for custom FETCHCOMMANDs yet, but that's coming soon.  Good news is
  that it appears to work well and allowed some cleanups and optimizations to
  doebuild().  SYNC support added.  See cnf/make.conf for more info --
  basically, "emerge rsync" (now callable via "emerge sync" as well) supports a
  configurable "Portage server" that begins either with "rsync://" or "cvs://".
  "emerge sync" is now not only a clean front-end, but a configurable front-end
  to the Portage update process.  I also removed dependency checking from
  'ebuild'.  This allowed me to removed some redundant code from portage.py,
  and seemed fine to do since 'ebuild' is more and more becoming a low-level
  developer tool.
  
  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org>: rewrite of cumulative USE
  setting code so that the new FEATURES (what used to be called MAINTAINER) is
  now cumulative and supports "-" and "-*" options.  FEATURES is expanded using
  all config files, while USE ignores make.globals but uses everything else.
  Optimization of a couple parts of doebuild().  Upgraded expandpath() and used
  it in one place where it was removed accidentally (in the new merge code.)
  Master category list is now stored externally in
  ${PORTDIR}/profiles/categories for ease of maintenance.
  
  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org> emerge: now supports the
  EMERGE_OPTS make.conf variable for enabling emerge options by default.
  Closes bug #605.
  
  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: dep_match() now
  works with * deps (again?  Looks like the code got ripped out somehow); this
  closes bug #490.
  
  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org> global change from
  "spython" -> "python", now that Portage is slick enough to update shared
  libraries correctly.
  
  21 Feb 2002; Grant Goodyear <g2boojum@gentoo.org> bin/chkcontents,
  man/chkcontents.1: New script to compare what's in a package's CONTENTS file
  with what's actually on the filesystem.  Useful for discovering that a
  package "collision" has occurred.

  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh, portage.py:
  Dependencies should be no longer checked during the "unpack" stage.  This
  closes bug #231.  Added the $KV kernel version variable to ebuild.sh so that
  it's available for all ebuilds.  This closes bug #599.
  
  21 Feb 2002; Daniel Robbins <drobbins@gentoo.org> ebuild.sh: S now defaults
  to ${WORKDIR}/${P} if it isn't defined.  That's right.  Defining S is now
  optional :)  This should eliminate around 1000 lines from our ports tree.
  
  20 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py: Fixed some
  major bugs in the new merge/config protect code.  Merging and config
  protection should now work.
  
  18 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge,
  ebuild.sh : Rewrote merge code.  Should merge symlinks only *after* the
  target has been merged (needs testing).  Added lots of comments.  Split
  dblink.merge() into 2 new functions -- .walktree() and .mergeme().
  Cleaned/optimized merging a good deal.  Added special "-*" USE variable to
  unset *all* USE variables defined up until that point.  
  
  18 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py, emerge,
  ebuild.sh : Fixed USE bug (config.reset() threw away our cumulative USE),
  streamlined turbo dep calculations by moving edb cache entry creation to
  ebuild.sh.  Started coding new dblink.merge() method that should be much
  cleaner, faster and merge symlinks safely.
 
  17 Feb 2002; Daniel Robbins <drobbins@gentoo.org> portage.py : Added
  cumulative USE variable support.  The final USE var is calculated
  cumulatively starting with make.profile, then make.conf, and then the
  environment.  Any "-foo" option in USE will turn off a previously-defined USE
  setting.  So, if you want to use the profile-default USE settings except turn
  "X" off, you add 'USE="-X"' to /etc/make.conf and that's it.  This greatly
  simplifies USE variable maintenance since developers can now easily add new
  USE variables that default to 'on'.  Simply add the USE variable and then add
  it to make.profile.  It will then be included in everyone's USE variables
  automatically unless they explicitly "-newvar" in /etc/make.conf or in the
  local environment.  This also enables easy one-shot disabling of USE
  variables.  For example, to merge xchat without GNOME support (when "gnome"
  is in your /etc/make.conf USE variable), simply type "USE="-gnome" emerge
  net-irc/xchat".  This is a lot easier than temporarily tweaking
  /etc/make.conf.
 
  17 Feb 2002: Daniel Robbins <drobbins@gentoo.org> emerge : Added a quick hack
  to cache ebuild dependency info using extended attributes on XFS filesystems.
  Gives a factor of 10 speedup for dependency calculations.  Will look into a
  generic caching solution that should offer similar performance increases on
  all filesystems.  Note: the fact that this hack is on CVS means that emerge
  is currently in a hyper-experimental state and shouldn't be used right now.
 
  16 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge : added support for 'emerge
  cat/pkg-version' instead of always having to require 'emerge cat/pkg'
  
  15 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge : reimplemented the display
  of cleaned packages to clearly show all versions that are about to be removed
  and which versions are going to stay  

  13 Feb 2002; D.Robbins <drobbins@gentoo.org> emerge :
  added --emptytree option

  13 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge, portage.py :
  fixed little bug where emerge --clean rsync wasn't correctly handled anymore
  implemented all new functionalities of emerge --clean, this adds --slots,
  --versions and --all options together with world and system modes

  12 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge, portage.py :
  changed emerge --zap to emerge --clean
  removed parts of the already implemented slots functionality to be able to
  fall back to a more flexible implementation. Binary compatible slots will now
  mostly influence emerge during the --clean operation

  12 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added fallback check in case UNMERGE_DELAY hasn't been defined in
  make.globals or make.conf

*portage 1.8.9_pre8 (18 Feb 2002)

  12 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  changed the rebuild code to use depgraph instead, dramatically reducing code
  duplication

  11 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  changed indentation of a code part that wasn't at the right level. It got the
  count of the non slot packages during --zap completely wrong

*portage 1.8.9_pre7 (11 Feb 2002)

  11 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  fixed bug in packagetree.dep_match() where a ~ dependency is returned as a
  string instead of as a list
  
  11 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  - removed support for --all and world in 'emerge --unmerge', by default now
    all matching packages are removed since with the new slots functionality
    old package versions should not exists anymore
  - colored package name red too when a blocking package is found during
    pretend operation
  - changed emerge invocation arguments to be in a new universal interface
    format this has been decided to be :
	'emerge --action --option --option [packageset]'
	some features however don't respect this, but that's since they are not
	package installation related and are easier to use as straight commands
	eg: emerge rsync
  - added UNMERGE_DELAY var to make.globals and support it in emerge to obtain
    the number of seconds to wait
  - support for NOCOLOR="yes" as wel as NOCOLOR="true"
  - major speedups for emerge -search
  - added formatted package descriptions of the matches from emerge --search
    that nicely wrap at 80 chars
  - rewrote retrieval of package descriptions to support descriptions that are
    specified on multiple lines
  - added support for 'noslot' to --zap, --update and --rebuild
  
  11 Feb 2002; G.Bevin <gbevin@gentoo.org> sandbox.c, libsandbox.c :
  added checks to see if the files where information is written to are really
  regular files and not symlinks

*portage 1.8.9_pre6 (10 Feb 2002)

  10 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added support for 'emerge --unmerge world' which removes all old package
  versions from the system
  made 'emerge --unmerge' take binary compatibility slots into account, this
  prevents that packages with different versions but also different slots, are
  being unmerged
  added support for "--verbose" in "emerge rebuild" and "emerge world" to
  provide details about packages that aren't in the local tree anymore and to
  notify the user about which packages don't support slots

  9 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added support for the rebuild mode which rebuilds all the packages on your
  system for which a corresponding package could be found in to portage tree

  9 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  renamed getEbuildPaths() or vartree to getebuildpaths()
  fixed bug in the merging of binary packages

  7 Feb 2002; G.Bevin <gbevin@gentoo.org> xpack.py :
  added additional argument to tbz2.getfile() which allows default content to
  be provided when the requested file couldn't be found in the tbz2 archive

  7 Feb 2002; G.Bevin <gbevin@gentoo.org> ebuild.sh :
  added SLOT information as the third entry in the temporary deps file that is
  generated during ebuild depend,
  
  7 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  obtain SLOT information from the deps file instead of using the slotgrab()
  function, removed slotgrab() function, updated some comments

  7 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added SLOT information to the generated edepend var for binary packages

*portage 1.8.9_pre5 (6 Feb 2002)

  6 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  fixed bugs where the old instance wasn't unmerged correctly if slots are
  identical, but ebuild version numbers not

  6 Feb 2002; Grant Goodyear <g2boojum@gentoo.org> cnf/make.conf :
  Copied proxy lines from make.globals (bug 431).

  6 Feb 2002; Vitaly Kushneriuk <vitaly@gentoo.org> portage.py :
  added missing SLOT param to merge(...).
  
*portage 1.8.9_pre4 (6 Feb 2002)

  6 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  fixed some bugs in the handling of PROVIDES and virtual packages together
  with slots, they used code that wasn't upudated to the new dblink constructor
  virtuals now use "" as slot, resulting in normally to same behaviour as what
  has been done before.
  
  5 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  sorted the packages to unmerge since this makes package names with revision
  endings appear before plain version numbers. This makes the unmerge code
  first remove the old and non slot aware packages before removing the newer
  alternative which is in fact exactly the same apart from the revision
  identifier.

*portage 1.8.9_pre3 (5 Feb 2002)

  5 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  only let the backward compatibility algorithm kick in during unmerge since
  it's impossible to correctly detect is in general.

*portage 1.8.9_pre2 (5 Feb 2002)

  5 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  fixed bug in the backward compatibility algorithm

*portage 1.8.9_pre1 (5 Feb 2002)

  4 Feb 2002; G.Bevin <gbevin@gentoo.org> ebuild.sh, emerge, portage.py :
  added binary compatibility slots, this also contains additional code to keep
  the unmerging of packages backwards compatible.
  
  4 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  added back support for the "ebuild help" command which seems to have
  disappeared somewhere along the updates
  
  4 Feb 2002; G.Bevin <gbevin@gentoo.org> make.conf, make.globals :
  added description and default entry for the imlib USE variable
  added flag to prozilla to disable prozilla's waiting for a user's keypress
  when a failure occurs
  
  4 Feb 2002; G.Bevin <gbevin@gentoo.org> output.py :
  bugfix, write read() function instead of red(), doh !
  
  4 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge, portage.py :
  implemented the ! dependency which prevents incompatible packages to be
  installed on the same system at the same time

  4 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  most emerge invocation options now have alternative short flags
  
  4 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  emerge now doesn't unmerge the last version of an installed version by
  default anymore, to really remove all instanced of packages the --all flag
  has to be used, the --safe flag is deprecated
  
  3 Feb 2002; G.Bevin <gbevin@gentoo.org> output.py, emerge,make.globals :
  all output can now be turned to black and white by using the functions in 
  output.py, this determines the mode by checking to NOCOLOR variable in
  make.conf or make.globals

  3 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  made it possible to run emerge --help and --search as non root

*portage 1.8.8-r1 (1 Feb 2002)

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py, ebuild.sh, ebuild.5 :
  added support for a pkg_setup() function which is executed before anything
  else and can be typically used for package configuration actions or required
  system checks

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  implemented the noauto MAINTAINER flags for all relevant ebuild commands

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  make env-update disregard backup files
  
  1 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added --pretend support instead of interactively asking to proceed,
  also added a delay before unmerging though to be sure

*portage 1.8.8 (1 Feb 2002)

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added --safe switch to complement the --unmerge option

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  rewrote the packagename without category support to also graceously handle
  deps specifiers at the beginning, this shouldn't be used in the ebuilds, but
  are very handy when using emerge --unmerge

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added emerge --unmerge support

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  added packagename without category support in the dep_match function

*portage 1.8.7 (30 Jan 2002)

  30 Jan 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  integrated and slightly adapted Brent Rahn's code to support package names
  without category

  30 Jan 2002; G.Bevin <gbevin@gentoo.org> ebuild.sh :
  integrated and fixed Azarah's patch to fix the wrongly generated archive size
  in the digests

*portage 1.8.6-r3 (28 Jan 2002)

  28 Jan 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  disabled warnings about non existant config file paths

  28 Jan 2002; G.Bevin <gbevin@gentoo.org> emerge :
  added verwilst pkgsearch code, which was turned into a seperate class and
  refactored for clarity and execution speed

  28 Jan 2002; G.Bevin <gbevin@gentoo.org> portage.py :
  renamed _xxx vars to _prepart in Vitaly's code addition

*portage 1.8.6-r2 (27 Jan 2002)

  24 Jan 2002; Vitaly Kushneriuk <vitaly@gentoo.org> portage.py :
  Fixed version compare code Also added test script to test future versions.

*portage 1.8.6-r1 (24 Jan 2002)

  24 Jan 2002; Karl Trygve Kalleberg <karltk@gentoo.org> dojar:
  Fixed typos.
  
*portage 1.8.6 (23 Jan 2002)

  22 Jan 2002; G.Bevin <gbevin@gentoo.org> libsandbox.c :
  added an additional check for SANDBOX_ON to optimize the speed in the execvp
  function call. Also removed error messages being printed when the PATH var
  isn't set.
  
  20 Jan 2002; Karl Trygve Kalleberg <karltk@gentoo.org> dojar :
  added dojar shell command as a java JAR handler

  17 Jan 2002; Daniel Robbins <drobbins@gentoo.org> :
  The package chosen by "emerge sys-apps/shadow" now matches that chosen in an
  emerge update or emerge system.  I forgot to add some "*" dep code to the
  dep_nomatch() method; this is now fixed.

*portage 1.8.5 (13 Jan 2002)

  13 Jan 2002; G.Bevin <gbevin@gentoo.org> ebuilds.sh, portage.py:
  added fine grained maintainer settings

*portage 1.8.4 (13 Jan 2002)

  12 Jan 2002; Daniel Robbins <drobbins@gentoo.org> :
  "emerge sys-apps/bash/" now works. (trailing "/" stripped to make
  tab-completion users happy)  This fixes bug #119

  12 Jan 2002; Daniel Robbins <drobbins@gentoo.org> :
  Portage should no longer bomb out if the current working directory doesn't
  exist (has been deleted from underneath).
  
  12 Jan 2002; Daniel Robbins <drobbins@gentoo.org> :
  added "--world" option for "emerge update".   This tells Portage to update
  the base system *as well as* upgrade any packages that are currently
  installed but have new versions available.  This is your standard full system
  update command.  This fixes bug #122

  12 Jan 2002; Daniel Robbins <drobbins@gentoo.org> :
  Added an expandpath() cache which speeds up merging dramatically.

*portage 1.8.3 (11 Jan 2002)

  11 Jan 2002; Mikael Hallendal <hallski@gentoo.org> ebuild.sh:
  added functions econf and einstall. Also made src_compile having a default
  implementation.

*portage 1.8.2 (07 Jan 2002)

  07 Jan 2002; G.Bevin <gbevin@gentoo.org> :
  sandbox included in portage
	
*portage 1.8.1 (30 Dec 2001)

  29 Dec 2001; Daniel Robbins <drobbins@gentoo.org> :
  "emerge update" is now functional!  Although the algorithm really should be
  sound, it is still considered in testing since we may need to tweak some
  dependencies.

  27 Dec 2001; Daniel Robbins <drobbins@gentoo.org> :
  Removed objprelink from the default USE variable.

*portage 1.8.0 (22 Dec 2001)

  22 Dec 2001; Daniel Robbins <drobbins@gentoo.org> :
  I messed up the "transparent .so library" update.  Included is the correct
  fix, which seems to allow glibc to update on my system without any tricks.
  I just merged a new glibc while in X, without using any of glibc's old
  pkg_postinst/pkg_preinst hacks.
  
  21 Dec 2001; Daniel Robbins <drobbins@gentoo.org> make.defaults.5, make.conf.5 :
  Moved make.defaults.5 to make.conf.5 and updated contents.

*portage 1.7.8 (21 Dec 2001)

  21 Dec 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  ebuild install doesn't throw away the compile directory if ebuild has been
  changed and MAINTAINER is set; we now use mv -f to move files into location
  on the filesystem, making our library install method even more robust. It
  should now be totally safe to  upgrade glibc while in X and playing music
  with xmms and surfing the Web and compiling 20 applications at once :)

* portage 1.7.7 (14 Dec 2001)

  14 Dec 2001; Aron Griffis <agriffis@gentoo.org>: portage.py :
  movefile() now unlink()s the destination file first which solves shared
  library install problems.

* portage 1.7.6 (13 Dec 2001)

  10 Dec 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  env_update() now generates an /etc/csh.env file in csh shell format.

* portage 1.7.5 (13 Dec 2001)

  10 Dec 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  added a little fix so a ~ dep isn't satisfied by a *much* later installed
  version; i.e. ~media-libs/freetype-1.3.1 satisfied by
  media-libs/freetype-2.0.5 being installed.
  
  30 Nov 2001; Daniel Robbins <drobbins@gentoo.org> ebuild :
  added a KeyboardInterrupt handler so ^C'ing a running ebuild process doesn't
  produce a Python traceback.

* portage 1.7.4 (29 Nov 2001)

  29 Nov 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  removed an unnecessary quirk in the code preventing virtual packages from
  being in any other category but "virtual".
  
  25 Nov 2001; Daniel Robbins <drobbins@gentoo.org> emerge :
  info file detection code has been improved.  

* portage 1.7.3 (20 Nov 2001)

  20 Nov 2001; Daniel Robbins <drobbins@gentoo.org> pdb, pdb.cgi, xpak :
  used /usr/bin/python instead of /usr/bin/spython.  Fixed.

* portage 1.7.2 (13 Nov 2001)

  13 Nov 2001; Aron Griffis <agriffis@gentoo.org> :
  emake will now try to build in parallel, and if it fails, will retry in
  non-parallel mode.
  
  13 Nov 2001; Daniel Robbins <drobbins@gentoo.org> ebuild.sh :
  an ebuild that used an archive with a name that was part of another archive
  would cause Portage to mess up the digest check.  No longer.

  31 Oct 2001; Donny Davies <woodchip@gentoo.org> make.conf, make.globals :
  comments about merging the fetch programs before trying to use them.

* portage 1.7.1 (30 Oct 2001)

  30 Oct 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  I accidentally broke "=" deps by being sloppy when I added "*" deps.  Trivial
  fix applied.

* portage 1.7 (29 Oct 2001)

  29 Oct 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  strange typo fix in the empty() digraph method.

* portage 1.6.12 (29 Oct 2001)

  29 Oct 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  "*" deps now implemented. "=sys/foo-1*" matches the latest 1.x version/rev of
  sys/foo, but will not match a 2.x version.

  26 Oct 2001; Daniel Robbins <drobbins@gentoo.org> portage.py :
  various new categories added.

Portage 1.6.11, released 18 Oct 2001
====================================

	*portage.py; device nodes are now not unmerged at all.


Portage 1.6.10, released 18 Oct 2001 
===================================

	*ebuild.sh: A and AA fix; now any A="foo" lines in the ebuild are ignored,
	allowing ebuilds with them to continue working.
	
	*portage.py: remove gnome-apps, gnome-office, gnome-libs, add gnome-extra
	categories.

	*ebuild.sh, portage.py: You can now use USE variables in SRC_URI to
	conditionally include archives.  In MAINTAINER mode, all archives are
	automatically included so that maintainers can check SRC_URIs and also
	generate complete digests.  A new file-based DEPEND and RDEPEND-passing
	mechanism has been added.
	
	*ebuild.sh Now adds filesize to the digest files

Portage 1.6.9, released 15 Sep 2001
===================================

	*portage.py
	unmerge() now does not touch device nodes.  Unlinking them or touching them
	in any way is bad practice.


Portage 1.6.8, released 12 Sep 2001
===================================

	*portage.py
	movefile() will now unlink() destfile if it is a symlink.  Should fix 
	problems where file gets created at symlink target rather than replacing
	the symlink.

	*queryhost.sh (agriffis)
	Parallel pinging and other fixes.

Portage 1.6.7, released 05 Sep 2001
===================================

	*portage.py
	(last-minute fix)
	CONFIG_PROTECT unmerge protection is now observed for symlinks, fifos and
	device nodes.
	
	*portage.py
	Fixes for unmerging CONFIG_PROTECTed files.  Protected files are now *not*
	unlinked from the filesystem.  Messier but safer, and simplifies package
	upgrades.

	*emerge
	Emerge output cleanups for GNU info directory generation.  New --verbose
	mode; new CONFIG_PROTECT scanning feature to let people know when there are
	config files to be updated.  New "--help config" docs to explain how to
	do it.

Portage 1.6.6, released 01 Sep 2001
====================================

	*portage.py
	Upgraded directory merging over existing objects.  Existing symlinks that
	point to existing directories will be kept and used as is; directories will
	be used as-is; any other objects (broken symlinks, files) will be copied
	to origfilename.backup and a ne directory will be created in its place.

Portage 1.6.5, released 31 Aug 2001
====================================
	
	*emerge 
	Fixes for handling multiple ebuilds, packages and/or dependencies on
	the command-line.

	*portage.py 
	An optimization to the digraph class so that the firstzero() method finds
	matches in close to the order that keys were added to the digraph.
